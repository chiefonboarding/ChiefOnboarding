{% extends 'settings_base.html' %}
{% load static %}
{% load allauth i18n %}
{% load crispy_forms_tags %}

{% block actions %}{% endblock %}
{% block settings_content %}
  {% include '_personal_tabs.html' %}
  <div class="card-body">
    <p>
        {% blocktranslate %}To protect your account with two-factor authentication, scan the QR code below with your authenticator app. Then, input the verification code generated by the app below.{% endblocktranslate %}
    </p>
    {% url 'settings:mfa_activate_totp' as action_url %}
    {% element form form=form method="post" action=action_url %}
        {% slot body %}
            {% element img src=totp_svg_data_uri alt=form.secret tags="mfa,totp,qr" %}{% endelement %}
            {% csrf_token %}
            {{ form|crispy }}
        {% endslot %}

        {% slot actions %}
          <div class="form-footer">
            <button type="submit" class="btn btn-primary">{% trans "Activate" %}</button>
          </div>
        {% endslot %}
    {% endelement %}
    </form>
  </div>
{% endblock %}
