{% extends 'no_login_base.html' %}
{% load i18n %}
{% load allauth account socialaccount %}
{% load crispy_forms_tags %}

{% block content %}
{% for message in messages %}
<div class="alert alert-{% if message.tags == 'error' %}danger{% else %}success{% endif %} mb-2">
  {{ message }}
</div>
{% endfor %}
<div class="card card-md">
    <div class="card-body">
    {% if not SOCIALACCOUNT_ONLY %}
      <form method="post">
        {% csrf_token %}
        <div>
          {{ form|crispy }}
          {% if redirect_field_value %}
              <input type="hidden"
                     name="{{ redirect_field_name }}"
                     value="{{ redirect_field_value }}" />
          {% endif %}
        </div>
        <button type="submit" class="btn btn-primary w-100">{% translate "Log in" %}</button>
      </form>
    {% endif %}
    {% if SOCIALACCOUNT_ENABLED %}
    {% get_providers as socialaccount_providers %}
      {% if socialaccount_providers %}
          {% if not SOCIALACCOUNT_ONLY %}
              <hr/>
              <h2>{% translate "Or use a third-party" %}</h2>
          {% endif %}
          {% include "socialaccount/snippets/provider_list.html" with process="login" %}
          {% include "socialaccount/snippets/login_extra.html" %}
      {% elif SOCIALACCOUNT_ONLY %}
        <p> {% trans "Please allow logging in with credentials or set up a third party" %}</p>
      {% endif %}
      {% include "socialaccount/snippets/login.html" %}
    {% endif %}
    </div>
</div>
{% endblock %}
